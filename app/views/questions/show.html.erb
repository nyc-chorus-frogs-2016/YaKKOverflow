<h1><%= @question.content %></h1>
<dl>
  <dt>Creator:</dt>
  <dd><%= @question.creator.username %></dd>
  <dt>Question Title:</dt>
  <dd><%= @question.title %></dd>
  <dt>Question Content:</dt>
  <dd><%= @question.content %></dd>
  <dt>Question Tags:</dt>
  <dd><% @question.tags.each do |tag| %>
        <%= tag.name %>
      <% end %>
  </dd>

  <div>Total Vote: <%=@question.vote_sum %></div>

  <%if @question.already_voted?(current_user.id)%>
    Already voted. You voted <%= @question.question_up_or_down_vote(current_user.id) %>!
  <% else %>
    <%= form_for [@question, @vote] do |f| %>
      <%= f.hidden_field :value, value: 1%>
      <%= f.submit "upvote"%>
    <% end %>
    <%= form_for [@question, @vote] do |f| %>
      <%= f.hidden_field :value, value: -1 %>
      <%= f.submit "downvote"%>
    <% end %>
  <% end %>

<div id="question-response-section">
  <% @question.responses.each do |current_response| %>
    <%= render partial: '/responses/response', locals: {response: current_response}%>
  <%end%>
  <% if current_user %>
    <a href="#" class="add-question-response">add a response to this question</a>
    <div id="question-response-form"><%= render partial: '/responses/response_form', locals: {respondable: @question, response: Response.new}%></div>
  <% end %>
</div>

</dl>


<% if @question.editable_by? current_user %>
  <%= link_to 'Edit', edit_question_path(@question) %>
  <%= link_to 'Delete', question_path(@question), method: :delete, data: { confirm: 'Are you sure?'} %>
<% end %>

<hr>

<div id = "answers-section">
Answers:
  <ul>
  <% @question.answers.each do |answer| %>
    <li><%= render partial: '/answers/answer', locals: {answer: answer, question: @question, vote: @vote}%></li>
  <% end %>
  </ul>
</div>

<hr>

<div>
<%= render partial: '/answers/new', locals: {answer: @answer, question: @question} %>
</div>
